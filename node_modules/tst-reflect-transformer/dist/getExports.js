"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getExportOfConstructor = void 0;
const ts = require("typescript");
const helpers_1 = require("./helpers");
const log_1 = require("./log");
function getExportOfConstructor(symbol, typeCtor, context) {
    var _a, _b, _c;
    const exportSymbol = context.typeChecker.getExportSymbolOfSymbol(symbol);
    if (!exportSymbol) {
        log_1.log.warn("getExportOfConstructor: Failed to find export of the constructor.");
        return undefined;
    }
    const classDeclaration = (0, helpers_1.getDeclaration)(symbol);
    const name = (_b = (_a = classDeclaration === null || classDeclaration === void 0 ? void 0 : classDeclaration.name) === null || _a === void 0 ? void 0 : _a.escapedText) === null || _b === void 0 ? void 0 : _b.toString();
    if (!name) {
        log_1.log.warn("getExportOfConstructor: Failed to get name of exported parent");
        return undefined;
    }
    if (!((_c = classDeclaration.modifiers) === null || _c === void 0 ? void 0 : _c.some(m => m.kind === ts.SyntaxKind.ExportKeyword))) {
        return undefined;
    }
    const source = classDeclaration.getSourceFile();
    return {
        en: exportSymbol.escapedName.toString(),
        n: name,
        srcPath: source.fileName,
        outPath: (0, helpers_1.getOutPathForSourceFile)(source.fileName, context.sourceFileContext.transformerContext),
    };
}
exports.getExportOfConstructor = getExportOfConstructor;
//# sourceMappingURL=getExports.js.map